CREATE TABLE THEMEPARK (
PARK_CODE VARCHAR(10) PRIMARY KEY,
PARK_NAME VARCHAR(35) NOT NULL,
PARK_CITY VARCHAR(50) NOT NULL,
PARK_COUNTRY CHAR(2) NOT NULL);


CREATE TABLE EMPLOYEE(
EMP_NUM NUMERIC(4) PRIMARY KEY,
EMP_TITLE VARCHAR(4),
EMP_LNAME VARCHAR(15) NOT NULL,
EMP_FNAME VARCHAR(15) NOT NULL,
EMP_DOB DATE NOT NULL,
EMP_HIRE_DATE DATE,
EMP_AREA_CODE VARCHAR(4) NOT NULL,
EMP_PHONE VARCHAR(12)NOT NULL,
PARK_CODE VARCHAR(10),
INDEX (PARK_CODE),
CONSTRAINT FK_EMP_PARK FOREIGN KEY(PARK_CODE) REFERENCES THEMEPARK(PARK_CODE));

CREATE TABLE TICKET (
TICKET_NO NUMERIC(10) PRIMARY KEY,
TICKET_PRICE VARCHAR(10),
TICKET_TYPE VARCHAR(10),
PARK_CODE VARCHAR(10),
INDEX (PARK_CODE),
CONSTRAINT FK_TICKET_PARK FOREIGN KEY(PARK_CODE) REFERENCES THEMEPARK(PARK_CODE));

CREATE TABLE ATTRACTION (
ATTRACT_NO NUMERIC(10) PRIMARY KEY,
ATTRACT_NAME VARCHAR(35),
ATTRACT_AGE NUMERIC(3) DEFAULT 0 NOT NULL,
ATTRACT_CAPACITY NUMERIC(3) NOT NULL,
PARK_CODE VARCHAR(10),
INDEX (PARK_CODE),
CONSTRAINT FK_ATTRACT_PARK FOREIGN KEY(PARK_CODE) REFERENCES THEMEPARK(PARK_CODE));

CREATE TABLE HOURS (
EMP_NUM NUMERIC(4),
ATTRACT_NO NUMERIC(10),
HOURS_PER_ATTRACT NUMERIC(2) NOT NULL,
HOUR_RATE NUMERIC(4,2) NOT NULL,
DATE_WORKED DATE NOT NULL,
INDEX (EMP_NUM),
INDEX (ATTRACT_NO),
CONSTRAINT PK_HOURS PRIMARY KEY (EMP_NUM, ATTRACT_NO, DATE_WORKED),
CONSTRAINT FK_HOURS_EMP FOREIGN KEY (EMP_NUM) REFERENCES EMPLOYEE(EMP_NUM),
CONSTRAINT FK_HOURS_ATTRACT FOREIGN KEY (ATTRACT_NO) REFERENCES ATTRACTION(ATTRACT_NO));

CREATE TABLE SALES (
TRANSACTION_NO NUMERIC PRIMARY KEY,
PARK_CODE VARCHAR(10),
SALE_DATE DATE NOT NULL,
INDEX (PARK_CODE),
CONSTRAINT FK_SALES_PARK FOREIGN KEY(PARK_CODE) REFERENCES THEMEPARK(PARK_CODE));

CREATE TABLE SALES_LINE (
TRANSACTION_NO NUMERIC,
LINE_NO NUMERIC(2,0) NOT NULL,
TICKET_NO NUMERIC(10) NOT NULL,
LINE_QTY NUMERIC(4) DEFAULT 0 NOT NULL,
LINE_PRICE NUMERIC(9,2) DEFAULT 0.00 NOT NULL,
INDEX (TRANSACTION_NO),
INDEX (TICKET_NO),
CONSTRAINT PK_SALES_LINE PRIMARY KEY (TRANSACTION_NO, LINE_NO),
CONSTRAINT FK_SALES_LINE_SALES FOREIGN KEY (TRANSACTION_NO) REFERENCES SALES(TRANSACTION_NO),
CONSTRAINT FK_SALES_LINE_TICKET FOREIGN KEY (TICKET_NO) REFERENCES TICKET(TICKET_NO));


INSERT INTO TICKET VALUES (13001,18.99,'FR1001')
INSERT INTO TICKET VALUES (13002,34.99,'FR1001')
INSERT INTO TICKET VALUES (13003,20.99,'FR1001')
INSERT INTO TICKET VALUES (88567,22.50,'UK3452')
INSERT INTO TICKET VALUES (88568,42.10,'UK3452')
INSERT INTO TICKET VALUES (89720,10.99,'UK3452')


INSERT INTO THEMEPARK VALUES ('FR1001', 'FairyLand', 'PARIS', 'FR');
INSERT INTO THEMEPARK VALUES ('NL1202', 'Efling', 'NOORD', 'IN');
INSERT INTO THEMEPARK VALUES ('SP4533', 'Adventure Port', 'BARCELONA', 'SP');
INSERT INTO THEMEPARK VALUES ('SW2323', 'Labyrinthe', 'LAUSANNE', 'SV');
INSERT INTO THEMEPARK VALUES ('UK2622', 'MiniLand', 'WINDSOR', 'UK');
INSERT INTO THEMEPARK VALUES ('UK3452', 'PleasureLand', 'STOKE', 'UK');
INSERT INTO THEMEPARK VALUES ('ZA1342', 'GoldTown', 'JOHANNESBURG', 'ZA');



INSERT INTO ATTRACTION VALUES (10034, 'ThunderCoaster',18, 34,'FR1001');
INSERT INTO ATTRACTION VALUES (10056, 'SpinningTeacups',16, 62,'FR1001');
INSERT INTO ATTRACTION VALUES (10067, 'FlightToStars', 32,24,'SP4533');
INSERT INTO ATTRACTION VALUES (18878, 'Ant-Trap', 12,30,'ZA1342');
INSERT INTO ATTRACTION VALUES (10082, NULL,42, 40,'FR1001');
INSERT INTO ATTRACTION VALUES (10098, 'Carnival', 8,120,'ZA1342');
INSERT INTO ATTRACTION VALUES (20056, '3D-Lego_Show',12, 200,'FR1001');
INSERT INTO ATTRACTION VALUES (30011, 'BlackHole2', 16,34,'UK2622');
INSERT INTO ATTRACTION VALUES (30012, 'Pirates', 15,42,'UK2622');
INSERT INTO ATTRACTION VALUES (30044, 'UnderSeaWord',16, 80,'SP4533');
INSERT INTO ATTRACTION VALUES (98764, 'Gold Rush', 17,1,'FR1001');


INSERT INTO EMPLOYEE VALUES (1234, 'Mr.','Doe','John','2000-01-01','2021-01-01','123','123-456-7890','FR1001');
INSERT INTO EMPLOYEE VALUES (5678, 'Mrs.','Smith','Jane','1995-05-15','2020-02-15','456','987-654-3210','NL1202');
INSERT INTO EMPLOYEE VALUES(9101, 'Dr.','Johnson','Robert' ,'1980-12-05','2018-08-10','789','555-123-4567','FR1001');
INSERT INTO EMPLOYEE VALUES (2222, 'Miss','Williams','Emily','1992-08-23','2017-06-20','321','333-444-5555','NL1202');
INSERT INTO EMPLOYEE VALUES (3333, 'Mr.','Brown','Michael' ,'1985-04-10','2015-12-03','555','888-777-9999','FR1001');
INSERT INTO EMPLOYEE VALUES (4444, 'Ms.','Davis','Sophia','1990-07-07','2016-09-25','666','222-111-3333','SP4533');
INSERT INTO EMPLOYEE VALUES (5555, 'Dr.','Lee','Andrew','1978-11-30','2014-03-12','888','444-555-6666','SW2323');
INSERT INTO EMPLOYEE VALUES(6666, 'Mrs.','Taylor','Olivia','1988-02-18','2013-07-08','999','777-888-0000','UK2622');
INSERT INTO EMPLOYEE VALUES(7777, 'Mr.','Harris','David','1997-06-05','2012-05-22','111','666-333-9999','UK3452');
INSERT INTO EMPLOYEE VALUES (8888, 'Miss','Garcia','Isabella','1983-09-12','2011-10-18','444','999-222-1111','ZA1342');


INSERT INTO EMPLOYEE VALUES (2049,'Mr','Rahat','Noman','1990-12-20','2015-5-5','7253','502-493-5555','UK3452');

// THIS IS FOR CHANGING THE NAME FROM ROBERTS TO DAVID

UPDATE EMPLOYEE
SET EMP_NAME='DAVID'
WHERE EMP_NUM = 9101

// i mistakenly changed all FNAMES into one so i am changin it back
UPDATE EMPLOYEE
SET EMP_FNAME = 'John'
WHERE EMP_NUM = 1234;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Emily'
WHERE EMP_NUM = 2222;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Michael'
WHERE EMP_NUM = 3333;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Sophia'
WHERE EMP_NUM = 4444;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Andrew'
WHERE EMP_NUM = 5555;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Jane'
WHERE EMP_NUM = 5678;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Olivia'
WHERE EMP_NUM = 6666;

UPDATE EMPLOYEE
SET EMP_FNAME = 'David'
WHERE EMP_NUM = 7777;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Isabella'
WHERE EMP_NUM = 8888;

UPDATE EMPLOYEE
SET EMP_FNAME = 'Robert'
WHERE EMP_NUM = 9101;

UPDATE EMPLOYEE
SET EMP_FNAME = 'DAVID'
WHERE EMP_NUM = 9101;
